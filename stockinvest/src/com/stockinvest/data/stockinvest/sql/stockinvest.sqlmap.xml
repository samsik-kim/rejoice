<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="stockinvest">

	<select id="selectEmp" resultClass="java.lang.Integer">
		SELECT COUNT(*) FROM EMP
	</select>


<!-- MySql 용 페이징 -->	
	<select id="testPaging" resultClass="HashMap">
		<isNotEmpty property="currentPage">
			<isNotEqual property="currentPage" compareValue="0">
				<include refid="pagingHeader"/>
			</isNotEqual>
		</isNotEmpty>
				SELECT * FROM EMP
		<isNotEmpty property="currentPage">
			<isNotEqual property="currentPage" compareValue="0">
				<include refid="pagingFooter"/>
			</isNotEqual>
		</isNotEmpty>
	</select>
	
	<sql id="pagingHeader">
		SELECT  
			y.*
		FROM (
			SELECT 
			 x.*,@rnum:=@rnum+1 as num
			FROM (
	</sql>
	
	<sql id="pagingFooter">
		<![CDATA[	
			) x,(select @rnum:=0) N 
		) y
		WHERE num >=#startNum# AND num <= #endNum#
		]]>
	</sql>
</sqlMap>