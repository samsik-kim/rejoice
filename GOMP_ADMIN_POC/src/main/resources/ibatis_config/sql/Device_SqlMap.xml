<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Device">

	<typeAlias alias="phoneInfo" type="com.omp.admin.device.servicedevice.model.PhoneInfo"/>
	<typeAlias alias="phoneTester" type="com.omp.admin.device.tester.model.PhoneTester"/>
	<typeAlias alias="CoreApp" type="com.omp.admin.device.scmng.model.CoreApp"/>
	<typeAlias alias="CoreAppSearch" type="com.omp.admin.device.scmng.model.CoreAppSearch"/>
	<typeAlias alias="CoreAppList" type="com.omp.admin.device.scmng.model.CoreAppList"/>
	<typeAlias alias="CoreAppSupportDeviceInfo" type="com.omp.admin.device.scmng.model.CoreAppSupportDeviceInfo"/>
	<typeAlias alias="CoreAppSupport" type="com.omp.admin.device.scmng.model.CoreAppSupport"/>
	<typeAlias alias="Device" type="com.omp.admin.device.scmng.model.Device"/>
	<typeAlias alias="DeviceSearch" type="com.omp.admin.device.scmng.model.DeviceSearch"/>
	<typeAlias alias="CoreAppDevice" type="com.omp.admin.device.scmng.model.CoreAppDevice"/>
	<typeAlias alias="CoreAppGroup" type="com.omp.admin.device.scmng.model.CoreAppGroup"/>
	<typeAlias alias="CoreAppGroupList" type="com.omp.admin.device.scmng.model.CoreAppGroupList"/>
	<typeAlias alias="CoreAppGroupSearch" type="com.omp.admin.device.scmng.model.CoreAppGroupSearch"/>
	<typeAlias alias="CoreAppGroupDevice" type="com.omp.admin.device.scmng.model.CoreAppGroupDevice"/>
	<typeAlias alias="CoreAppGroupDeviceSearch" type="com.omp.admin.device.scmng.model.CoreAppGroupDeviceSearch"/>
	<typeAlias alias="CoreAppGroupEdit" type="com.omp.admin.device.scmng.model.CoreAppGroupEdit"/>
	<typeAlias alias="CoreAppHistorySearch" type="com.omp.admin.device.scmng.model.CoreAppHistorySearch"/>
	

	<resultMap id="phoneInfoResult" class="phoneInfo" >
		<result column="PHONE_MODEL_CD" property="phoneModelCd" />
		<result column="GDCD" property="gdcd" />
		<result column="MGMT_PHONE_MODEL_NM" property="mgmtPhoneModelNm" />
		<result column="MODEL_NM" property="modelNm" />
		<result column="MAKE_COMP" property="makeComp" />
		<result column="MAKE_COMP_NM" property="makeCompNm" />
		<result column="VM_VER" property="vmVer" />
		<result column="VM_VER_NM" property="vmVerNm" />
		<result column="LCD_SIZE" property="lcdSize" />
		<result column="LCD_SIZE_NM" property="lcdSizeNm" />
		<result column="VM_TYPE" property="vmType" />
		<result column="VM_TYPE_NM" property="vmTypeNm" />
		<result column="NETWORK_CD" property="networkCd" />
		<result column="LIST_IMG_POS" property="listImgPos" />
		<result column="DTL_IMG_POS" property="dtlImgPos" />
		<result column="SVC_CD" property="svcCd" />
		<result column="SVC_CD_NM" property="svcCdNm" />
		<result column="DEL_YN" property="delYn" />
		<result column="REG_ID" property="regId" />
		<result column="REG_DTTM" property="regDttm" />
		<result column="UPD_ID" property="updId" />
		<result column="UPD_DTTM" property="updDttm" />
	</resultMap>

	<resultMap id="phoneInfoPagingResult" class="phoneInfo" >
		<result property="totalCount" column="total_count"/>
		<result column="PHONE_MODEL_CD" property="phoneModelCd" />
		<result column="GDCD" property="gdcd" />
		<result column="MGMT_PHONE_MODEL_NM" property="mgmtPhoneModelNm" />
		<result column="MODEL_NM" property="modelNm" />
		<result column="MAKE_COMP" property="makeComp" />
		<result column="MAKE_COMP_NM" property="makeCompNm" />
		<result column="VM_VER" property="vmVer" />
		<result column="VM_VER_NM" property="vmVerNm" />
		<result column="LCD_SIZE" property="lcdSize" />
		<result column="LCD_SIZE_NM" property="lcdSizeNm" />
		<result column="VM_TYPE" property="vmType" />
		<result column="VM_TYPE_NM" property="vmTypeNm" />
		<result column="NETWORK_CD" property="networkCd" />
		<result column="LIST_IMG_POS" property="listImgPos" />
		<result column="DTL_IMG_POS" property="dtlImgPos" />
		<result column="SVC_CD" property="svcCd" />
		<result column="SVC_CD_NM" property="svcCdNm" />
		<result column="DEL_YN" property="delYn" />
		<result column="REG_ID" property="regId" />
		<result column="REG_DTTM" property="regDttm" />
		<result column="UPD_ID" property="updId" />
		<result column="UPD_DTTM" property="updDttm" />
	</resultMap>

	<resultMap id="phoneTesterResult" class="phoneTester" >
		<result column="TESTER_ID" property="testerId" />
		<result column="DSCR" property="dscr" />
		<result column="REG_ID" property="regId" />
		<result column="REG_DTTM" property="regDttm" />
		<result column="UPD_ID" property="updId" />
		<result column="UPD_DTTM" property="updDttm" />
	</resultMap>

	<resultMap id="phoneTesterPagingResult" class="phoneTester" >
		<result property="totalCount" column="total_count"/>
		<result column="TESTER_ID" property="testerId" />
		<result column="DSCR" property="dscr" />
		<result column="REG_ID" property="regId" />
		<result column="REG_DTTM" property="regDttm" />
		<result column="UPD_ID" property="updId" />
		<result column="UPD_DTTM" property="updDttm" />
	</resultMap>

	<resultMap id="Device.searchCoreAppList.result"
		class="CoreAppList">
		<result property="totalCount" column="TOTAL_COUNT"/>
		<result property="coreappId" column="COREAPP_ID"/>
		<result property="coreappGroupId" column="COREAPP_GROUP_ID"/>
		<result property="ver" column="VER"/>
		<result property="appPath" column="APP_PATH"/>
		<result property="prodDesc" column="PROD_DESC"/>
		<result property="status" column="STATUS"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="regId" column="REG_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
		<result property="updId" column="UPD_ID"/>
		<result property="appType" column="APP_TYPE"/>
		<result property="groupName" column="GROUP_NAME"/>
	</resultMap>

	<resultMap id="Device.selectSupportDeviceList.result"
		class="CoreAppSupportDeviceInfo">
		<result property="phoneModelCd" column="PHONE_MODEL_CD"/>
		<result property="gdcd" column="GDCD"/>
		<result property="mgmtPhoneModelNm" column="MGMT_PHONE_MODEL_NM"/>
		<result property="modelNm" column="MODEL_NM"/>
		<result property="makeComp" column="MAKE_COMP"/>
		<result property="vmVer" column="VM_VER"/>
		<result property="lcdSize" column="LCD_SIZE"/>
		<result property="vmType" column="VM_TYPE"/>
		<result property="networkCd" column="NETWORK_CD"/>
		<result property="listImgPos" column="LIST_IMG_POS"/>
		<result property="dtlImgPos" column="DTL_IMG_POS"/>
		<result property="svcCd" column="SVC_CD"/>
		<result property="delYn" column="DEL_YN"/>
		<result property="coreappId" column="COREAPP_ID"/>
		<result property="verStatus" column="VER_STATUS"/>
		<result property="scTestVer" column="SC_TEST_VER"/>
		<result property="scProductVer" column="SC_PRODUCT_VER"/>
		<result property="armTestVer" column="ARM_TEST_VER"/>
		<result property="armProductVer" column="ARM_PRODUCT_VER"/>
	</resultMap>

	<resultMap id="Device.selectCoreAppInfo.result"
		class="CoreApp">
		<result property="coreappId" column="COREAPP_ID"/>
		<result property="coreappGroupId" column="COREAPP_GROUP_ID"/>
		<result property="ver" column="VER"/>
		<result property="appPath" column="APP_PATH"/>
		<result property="prodDesc" column="PROD_DESC"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="status" column="STATUS"/>
		<result property="regId" column="REG_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
		<result property="updId" column="UPD_ID"/>
		<result property="appType" column="APP_TYPE"/>
		<result property="groupName" column="GROUP_NAME"/>
	</resultMap>
	
	<resultMap id="Device.selectCoreAppInfoByVer.result"
		class="CoreApp">
		<result property="coreappId" column="COREAPP_ID"/>
		<result property="coreappGroupId" column="COREAPP_GROUP_ID"/>
		<result property="ver" column="VER"/>
		<result property="appPath" column="APP_PATH"/>
		<result property="prodDesc" column="PROD_DESC"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="regId" column="REG_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
		<result property="updId" column="UPD_ID"/>
	</resultMap>

	<resultMap id="Device.searchCoreappManageDevices.result"
		class="Device">
		<result property="phoneModelCd" column="PHONE_MODEL_CD"/>
		<result property="gdcd" column="GDCD"/>
		<result property="mgmtPhoneModelNm" column="MGMT_PHONE_MODEL_NM"/>
		<result property="modelNm" column="MODEL_NM"/>
		<result property="makeComp" column="MAKE_COMP"/>
		<result property="vmVer" column="VM_VER"/>
		<result property="lcdSize" column="LCD_SIZE"/>
		<result property="vmType" column="VM_TYPE"/>
		<result property="networkCd" column="NETWORK_CD"/>
		<result property="listImgPos" column="LIST_IMG_POS"/>
		<result property="dtlImgPos" column="DTL_IMG_POS"/>
		<result property="svcCd" column="SVC_CD"/>
		<result property="delYn" column="DEL_YN"/>
		<result property="regId" column="REG_ID"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="updId" column="UPD_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
	</resultMap>

	<resultMap id="Device.searchCoreappByDevice.result"
		class="CoreAppDevice">
		<result property="coreappId" column="COREAPP_ID"/>
		<result property="ver" column="VER"/>
		<result property="appPath" column="APP_PATH"/>
		<result property="prodDesc" column="PROD_DESC"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="regId" column="REG_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
		<result property="updId" column="UPD_ID"/>
		<result property="phoneModelCd" column="PHONE_MODEL_CD"/>
		<result property="verStatus" column="VER_STATUS"/>
	</resultMap>

	<resultMap id="Device.searchCoreAppGroupList.result"
		class="CoreappGroupList">
		<result property="totalCount" column="TOTAL_COUNT"/>
		<result property="coreappGroupId" column="COREAPP_GROUP_ID"/>
		<result property="appType" column="APP_TYPE"/>
		<result property="groupName" column="GROUP_NAME"/>
		<result property="groupDesc" column="GROUP_DESC"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="regId" column="REG_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
		<result property="updId" column="UPD_ID"/>
		<result property="deviceCount" column="DEVICE_COUNT"/>
		<result property="coreappCount" column="COREAPP_COUNT"/>
	</resultMap>
	
	<resultMap id="Device.searchCoreAppGroupList4Vermng.result"
		class="CoreappGroupList">
		<result property="coreappGroupId" column="COREAPP_GROUP_ID"/>
		<result property="appType" column="APP_TYPE"/>
		<result property="groupName" column="GROUP_NAME"/>
		<result property="groupDesc" column="GROUP_DESC"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="regId" column="REG_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
		<result property="updId" column="UPD_ID"/>
		<result property="deviceCount" column="DEVICE_COUNT"/>
	</resultMap>

	<resultMap id="Device.getCoreAppGroupDeviceList.result"
		class="CoreAppGroupDevice">
		<result property="phoneModelCd" column="PHONE_MODEL_CD"/>
		<result property="gdcd" column="GDCD"/>
		<result property="mgmtPhoneModelNm" column="MGMT_PHONE_MODEL_NM"/>
		<result property="modelNm" column="MODEL_NM"/>
		<result property="makeComp" column="MAKE_COMP"/>
		<result property="vmVer" column="VM_VER"/>
		<result property="lcdSize" column="LCD_SIZE"/>
		<result property="vmType" column="VM_TYPE"/>
		<result property="networkCd" column="NETWORK_CD"/>
		<result property="listImgPos" column="LIST_IMG_POS"/>
		<result property="dtlImgPos" column="DTL_IMG_POS"/>
		<result property="svcCd" column="SVC_CD"/>
		<result property="delYn" column="DEL_YN"/>
		<result property="joined" column="JOINED"/>
		<result property="coreappGroupId" column="COREAPP_GROUP_ID"/>
		<result property="groupName" column="GROUP_NAME"/>
	</resultMap>


	<resultMap id="Device.getGroupDeviceList.result"
		class="CoreAppGroupDevice">
		<result property="phoneModelCd" column="PHONE_MODEL_CD"/>
		<result property="gdcd" column="GDCD"/>
		<result property="mgmtPhoneModelNm" column="MGMT_PHONE_MODEL_NM"/>
		<result property="modelNm" column="MODEL_NM"/>
		<result property="makeComp" column="MAKE_COMP"/>
		<result property="vmVer" column="VM_VER"/>
		<result property="lcdSize" column="LCD_SIZE"/>
		<result property="vmType" column="VM_TYPE"/>
		<result property="networkCd" column="NETWORK_CD"/>
		<result property="listImgPos" column="LIST_IMG_POS"/>
		<result property="dtlImgPos" column="DTL_IMG_POS"/>
		<result property="svcCd" column="SVC_CD"/>
		<result property="delYn" column="DEL_YN"/>
	</resultMap>


	<resultMap id="Device.selectCoreAppGroupEdit.result"
		class="CoreAppGroupEdit">
		<result property="coreappGroupId" column="COREAPP_GROUP_ID"/>
		<result property="appType" column="APP_TYPE"/>
		<result property="groupName" column="GROUP_NAME"/>
		<result property="groupDesc" column="GROUP_DESC"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="regId" column="REG_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
		<result property="updId" column="UPD_ID"/>
	</resultMap>

	<resultMap id="Device.searchCoreappHistory.result"
		class="CoreApp">
		<result property="coreappId" column="COREAPP_ID"/>
		<result property="coreappGroupId" column="COREAPP_GROUP_ID"/>
		<result property="ver" column="VER"/>
		<result property="appPath" column="APP_PATH"/>
		<result property="prodDesc" column="PROD_DESC"/>
		<result property="status" column="STATUS"/>
		<result property="regDttm" column="REG_DTTM"/>
		<result property="regId" column="REG_ID"/>
		<result property="updDttm" column="UPD_DTTM"/>
		<result property="updId" column="UPD_ID"/>
	</resultMap>


	<statement id="Device.selectPhoneInfoPagingList" parameterClass="phoneInfo" resultMap="phoneInfoPagingResult">
	   	<include refid="GOMP.pagingStart"/>
		SELECT /* Device.selectPhoneInfoPagingList, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		   	<include refid="GOMP.pagingTotalCount"/>
		        TA.PHONE_MODEL_CD
		       ,TA.GDCD
		       ,TA.MGMT_PHONE_MODEL_NM
		       ,TA.MODEL_NM
		       ,TA.MAKE_COMP
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.MAKE_COMP) as MAKE_COMP_NM
		       ,TA.VM_VER
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.VM_VER) as VM_VER_NM
		       ,TA.LCD_SIZE
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.LCD_SIZE) as LCD_SIZE_NM
		       ,TA.VM_TYPE
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.VM_TYPE) as VM_TYPE_NM
		       ,TA.NETWORK_CD
		       ,TA.LIST_IMG_POS
		       ,TA.DTL_IMG_POS
		       ,TA.SVC_CD
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.SVC_CD) as SVC_CD_NM
		       ,TA.DEL_YN
		       ,TA.REG_ID
		       ,TA.REG_DTTM
		       ,TA.UPD_ID
		       ,TA.UPD_DTTM
		  FROM  TBL_PHONE_INFO TA
		 WHERE  1 = 1
		-- AND  TA.DEL_YN = 'N'
		<isNotEmpty property="searchLcdSize">
		   AND  TA.LCD_SIZE = #searchLcdSize#
		</isNotEmpty>
		<isNotEmpty property="searchVmVer">
		   AND  TA.VM_VER = #searchVmVer#
		</isNotEmpty>
		<isNotEmpty property="searchSvcCd">
		   AND  TA.SVC_CD = #searchSvcCd#
		</isNotEmpty>
		<isNotEmpty property="searchType">
		<isNotEmpty property="searchValue">
			<isEqual property="searchType" compareValue="byMgmtPhoneModelNm">
		   AND  TA.MGMT_PHONE_MODEL_NM LIKE '%' ||  #searchValue# || '%'
			</isEqual>
			<isEqual property="searchType" compareValue="byModelNm">
		   AND  TA.MODEL_NM LIKE '%' ||  #searchValue# || '%'
			</isEqual>
			<isEqual property="searchType" compareValue="byGdcd">
		   AND  TA.GDCD LIKE '%' ||  #searchValue# || '%'
			</isEqual>
			<isEqual property="searchType" compareValue="byBoth">
		   AND (TA.MGMT_PHONE_MODEL_NM like '%$searchValue$%' OR TA.MODEL_NM like '%$searchValue$%' OR TA.GDCD like '%$searchValue$%' )
			</isEqual>
		</isNotEmpty>
		</isNotEmpty>
		-- ORDER BY TA.REG_DTTM DESC
		-- ORDER BY TA.DEL_YN ASC, TA.REG_DTTM DESC
		ORDER BY MAKE_COMP_NM ASC, TA.MODEL_NM ASC, TA.VM_TYPE ASC, TA.VM_VER ASC, TA.LCD_SIZE ASC, TA.SVC_CD ASC
	   	<include refid="GOMP.pagingEnd"/>
	</statement>
  
	<statement id="Device.selectPopPhoneInfoPagingList" parameterClass="phoneInfo" resultMap="phoneInfoPagingResult">
	   	<include refid="GOMP.pagingStart"/>
		SELECT /* Device.selectPhoneInfoPagingList, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		   	<include refid="GOMP.pagingTotalCount"/>
		        TA.PHONE_MODEL_CD
		       ,TA.GDCD
		       ,TA.MGMT_PHONE_MODEL_NM
		       ,TA.MODEL_NM
		       ,TA.MAKE_COMP
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.MAKE_COMP) as MAKE_COMP_NM
		       ,TA.VM_VER
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.VM_VER) as VM_VER_NM
		       ,TA.LCD_SIZE
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.LCD_SIZE) as LCD_SIZE_NM
		       ,TA.VM_TYPE
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.VM_TYPE) as VM_TYPE_NM
		       ,TA.NETWORK_CD
		       ,TA.LIST_IMG_POS
		       ,TA.DTL_IMG_POS
		       ,TA.SVC_CD
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.SVC_CD) as SVC_CD_NM
		       ,TA.DEL_YN
		       ,TA.REG_ID
		       ,TA.REG_DTTM
		       ,TA.UPD_ID
		       ,TA.UPD_DTTM
		  FROM  TBL_PHONE_INFO TA
		 WHERE  1 = 1
		-- AND  TA.DEL_YN = 'N'
		<isNotEmpty property="searchLcdSize">
		   AND  TA.LCD_SIZE = #searchLcdSize#
		</isNotEmpty>
		<isNotEmpty property="searchVmVer">
		   AND  TA.VM_VER = #searchVmVer#
		</isNotEmpty>
		<isNotEmpty property="searchSvcCd">
		   AND  TA.SVC_CD = #searchSvcCd#
		</isNotEmpty>
		<isNotEmpty property="searchType">
		<isNotEmpty property="searchValue">
			<isEqual property="searchType" compareValue="byMgmtPhoneModelNm">
		   AND  TA.MGMT_PHONE_MODEL_NM LIKE '%' ||  #searchValue# || '%'
			</isEqual>
			<isEqual property="searchType" compareValue="byModelNm">
		   AND  TA.MODEL_NM LIKE '%' ||  #searchValue# || '%'
			</isEqual>
			<isEqual property="searchType" compareValue="byGdcd">
		   AND  TA.GDCD LIKE '%' ||  #searchValue# || '%'
			</isEqual>
			<isEqual property="searchType" compareValue="byBoth">
		   AND (TA.MGMT_PHONE_MODEL_NM like '%$searchValue$%' OR TA.MODEL_NM like '%$searchValue$%' OR TA.GDCD like '%$searchValue$%' )
			</isEqual>
		</isNotEmpty>
		</isNotEmpty>
		-- ORDER BY TA.REG_DTTM DESC
		-- ORDER BY TA.DEL_YN ASC, TA.REG_DTTM DESC
		AND SVC_CD in ('US005202','US005203')
		ORDER BY MAKE_COMP_NM ASC, TA.MODEL_NM ASC, TA.VM_TYPE ASC, TA.VM_VER ASC, TA.LCD_SIZE ASC, TA.SVC_CD ASC
	   	<include refid="GOMP.pagingEnd"/>
	</statement>
	
	<statement id="Device.selectPhoneInfoList" parameterClass="phoneInfo" resultMap="phoneInfoResult">
		SELECT /* Device.selectPhoneInfoList, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        TA.PHONE_MODEL_CD
		       ,TA.GDCD
		       ,TA.MGMT_PHONE_MODEL_NM
		       ,TA.MODEL_NM
		       ,TA.MAKE_COMP
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.MAKE_COMP) as MAKE_COMP_NM
		       ,TA.VM_VER
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.VM_VER) as VM_VER_NM
		       ,TA.LCD_SIZE
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.LCD_SIZE) as LCD_SIZE_NM
		       ,TA.VM_TYPE
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.VM_TYPE) as VM_TYPE_NM
		       ,TA.NETWORK_CD
		       ,TA.LIST_IMG_POS
		       ,TA.DTL_IMG_POS
		       ,TA.SVC_CD
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.SVC_CD) as SVC_CD_NM
		       ,TA.DEL_YN
		       ,TA.REG_ID
		       ,TA.REG_DTTM
		       ,TA.UPD_ID
		       ,TA.UPD_DTTM
		  FROM  TBL_PHONE_INFO TA
		 WHERE  TA.DEL_YN = 'N'
		 -- ORDER BY TA.REG_DTTM DESC
		 ORDER BY MAKE_COMP_NM ASC, TA.MODEL_NM ASC, TA.VM_TYPE ASC, TA.VM_VER ASC, TA.LCD_SIZE ASC, TA.SVC_CD ASC
	</statement>

	<statement id="Device.selectPhoneInfo" parameterClass="phoneInfo" resultMap="phoneInfoResult">
		SELECT /* Device.selectPhoneInfo, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        TA.PHONE_MODEL_CD
		       ,TA.GDCD
		       ,TA.MGMT_PHONE_MODEL_NM
		       ,TA.MODEL_NM
		       ,TA.MAKE_COMP
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.MAKE_COMP) as MAKE_COMP_NM
		       ,TA.VM_VER
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.VM_VER) as VM_VER_NM
		       ,TA.LCD_SIZE
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.LCD_SIZE) as LCD_SIZE_NM
		       ,TA.VM_TYPE
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.VM_TYPE) as VM_TYPE_NM
		       ,TA.NETWORK_CD
		       ,TA.LIST_IMG_POS
		       ,TA.DTL_IMG_POS
		       ,TA.SVC_CD
		       ,(SELECT CD_NM FROM TBL_COMM_CD WHERE DTL_FULL_CD = TA.SVC_CD) as SVC_CD_NM
		       ,TA.DEL_YN
		       ,TA.REG_ID
		       ,TA.REG_DTTM
		       ,TA.UPD_ID
		       ,TA.UPD_DTTM
		  FROM  TBL_PHONE_INFO TA
		 WHERE  TA.PHONE_MODEL_CD = #phoneModelCd#
	</statement>

	<statement id="Device.selectPhoneInfoCnt" parameterClass="phoneInfo" resultClass="Integer">
		SELECT /* Device.selectPhoneInfoCnt, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        COUNT(TA.PHONE_MODEL_CD)
		  FROM  TBL_PHONE_INFO TA
		 WHERE  TA.PHONE_MODEL_CD = ( (SELECT UPPER(CD_NM) FROM TBL_COMM_CD WHERE DTL_FULL_CD = #vmType#)
	                                        || '_' || (SELECT UPPER(CD_NM) FROM TBL_COMM_CD WHERE DTL_FULL_CD = #vmVer#)
	                                        || '_' || UPPER(#gdcd#) )
	</statement>

	<insert id="Device.insertPhoneInfo" parameterClass="phoneInfo">
		INSERT /* Device.insertPhoneInfo, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		       INTO TBL_PHONE_INFO (
		        PHONE_MODEL_CD
		       ,GDCD
		       ,MGMT_PHONE_MODEL_NM
		       ,MODEL_NM
		       ,MAKE_COMP
		       ,VM_VER
		       ,LCD_SIZE
		       ,VM_TYPE
		       ,NETWORK_CD
			<isNotEmpty property="listImgPos">
		       ,LIST_IMG_POS
			</isNotEmpty>
			<isNotEmpty property="dtlImgPos">
		       ,DTL_IMG_POS
			</isNotEmpty>
		       ,SVC_CD
		       ,DEL_YN
		       ,REG_ID
		       ,REG_DTTM
		       ,UPD_ID
		       ,UPD_DTTM
		) VALUES (
		        (SELECT UPPER(CD_NM) FROM TBL_COMM_CD WHERE DTL_FULL_CD = #vmType#)
		            || '_' || (SELECT UPPER(CD_NM) FROM TBL_COMM_CD WHERE DTL_FULL_CD = #vmVer#)
		            || '_' || UPPER(#gdcd#)
		       ,#gdcd#
		       ,#mgmtPhoneModelNm#
		       ,#modelNm#
		       ,#makeComp#
		       ,#vmVer#
		       ,#lcdSize#
		       ,#vmType#
		       ,#networkCd#
			<isNotEmpty property="listImgPos">
		       ,#listImgPos#
			</isNotEmpty>
			<isNotEmpty property="dtlImgPos">
		       ,#dtlImgPos#
			</isNotEmpty>
		       ,#svcCd#
		       ,#delYn#
		       ,#regId#
		       ,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
		       ,#updId#
		       ,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
		)
	</insert>

	<update id="Device.updatePhoneInfo" parameterClass="phoneInfo">
		UPDATE /* Device.updatePhoneInfo, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        TBL_PHONE_INFO
		   SET  GDCD = #gdcd#
		       ,MGMT_PHONE_MODEL_NM = #mgmtPhoneModelNm#
		       ,MODEL_NM = #modelNm#
		       ,MAKE_COMP = #makeComp#
		       ,VM_VER = #vmVer#
		       ,LCD_SIZE = #lcdSize#
		       ,VM_TYPE = #vmType#
		       ,NETWORK_CD = #networkCd#
			<isNotEmpty property="listImgPos">
		       ,LIST_IMG_POS = #listImgPos#
			</isNotEmpty>
			<isNotEmpty property="dtlImgPos">
		       ,DTL_IMG_POS = #dtlImgPos#
			</isNotEmpty>
		       ,SVC_CD = #svcCd#
		       ,DEL_YN = #delYn#
		       ,UPD_ID = #updId#
		       ,UPD_DTTM = TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
		 WHERE  PHONE_MODEL_CD = #phoneModelCd#
	</update>

	<update id="Device.updatePhoneInfoDelYn" parameterClass="phoneInfo">
		UPDATE /* Device.updatePhoneInfoDelYn, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        TBL_PHONE_INFO
		   SET  DEL_YN = 'Y'
		       ,UPD_ID = #updId#
		       ,UPD_DTTM = TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
		 WHERE  PHONE_MODEL_CD = #phoneModelCd#
	</update>

	<statement id="Device.selectPhoneTesterPagingList" parameterClass="phoneTester" resultMap="phoneTesterPagingResult">
	   	<include refid="GOMP.pagingStart"/>
		SELECT /* Device.selectPhoneTesterPagingList, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */ 
		   	<include refid="GOMP.pagingTotalCount"/>
		        TA.TESTER_ID
		       ,TA.DSCR
		       ,TA.REG_ID
		       ,TA.REG_DTTM
		       ,TA.UPD_ID
		       ,TA.UPD_DTTM
		  FROM  TBL_PHONE_TESTER TA
		 WHERE  1 = 1
		<isNotEmpty property="searchValue">
		   AND  TA.TESTER_ID LIKE '%' ||  #searchValue# || '%'
		</isNotEmpty>
		 ORDER BY TA.REG_DTTM DESC
	   	<include refid="GOMP.pagingEnd"/>
	</statement>

	<statement id="Device.selectPhoneTesterList" parameterClass="PhoneTester" resultMap="phoneTesterResult">
		SELECT /* Device.selectPhoneTesterList, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        TA.TESTER_ID
		       ,TA.DSCR
		       ,TA.REG_ID
		       ,TA.REG_DTTM
		       ,TA.UPD_ID
		       ,TA.UPD_DTTM
		  FROM  TBL_PHONE_TESTER TA
		 ORDER BY TA.REG_DTTM DESC
	</statement>

	<statement id="Device.selectPhoneTester" parameterClass="PhoneTester" resultMap="phoneTesterResult">
		SELECT /* Device.selectPhoneTester, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        TA.TESTER_ID
		       ,TA.DSCR
		       ,TA.REG_ID
		       ,TA.REG_DTTM
		       ,TA.UPD_ID
		       ,TA.UPD_DTTM
		  FROM  TBL_PHONE_TESTER TA
		 WHERE  TA.TESTER_ID = #testerId#
	</statement>

	<insert id="Device.insertPhoneTester" parameterClass="PhoneTester">
		INSERT /* Device.insertPhoneTester, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		       INTO TBL_PHONE_TESTER (
		        TESTER_ID
		       ,DSCR
		       ,REG_ID
		       ,REG_DTTM
		       ,UPD_ID
		       ,UPD_DTTM
		) VALUES (
		        #testerId#
		       ,#dscr#
		       ,#regId#
		       ,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
		       ,#regId#
		       ,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
		)
	</insert>

	<update id="Device.updatePhoneTester" parameterClass="PhoneTester">
		UPDATE /* Device.updatePhoneTester, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        TBL_PHONE_TESTER
		   SET  DSCR = #dscr#
		       ,UPD_ID = #updId#
		       ,UPD_DTTM = TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS')
		 WHERE  TESTER_ID = #testerId#
	</update>

	<delete id="Device.deletePhoneTester" parameterClass="PhoneTester">
		DELETE /* Device.deletePhoneTester, AdminPoC, jslee, 2011.03.21 : Device_SqlMap.xml */
		        TBL_PHONE_TESTER
		 WHERE  TESTER_ID = #testerId#
	</delete>


	<select id="Device.searchCoreAppList"
		resultMap="Device.searchCoreAppList.result"
		parameterClass="CoreAppSearch">
		/* Device.searchCoreAppList kbeui 2011.05.11 : Device_SqlMap.xml */
	   	<include refid="GOMP.pagingStart"/>
		select 
		   	<include refid="GOMP.pagingTotalCount"/>
		         t1.coreapp_id
		       , t1.coreapp_group_id
		       , t1.ver
		       , t1.app_path
		       , t1.prod_desc
		       , t1.status
		       , t1.reg_dttm
		       , t1.reg_id
		       , t1.upd_dttm
		       , t1.upd_id
		       , t2.app_type
		       , t2.group_name
		  from
		       tbl_dp_coreapp t1,
		       tbl_dp_coreapp_group t2
		 where
		       t2.coreapp_group_id = t1.coreapp_group_id
		       and t1.reg_dttm between #fromDate# || '000000' and #toDate# || '235959'
		<isNotEmpty property="groupId">
		       and t1.coreapp_group_id = #groupId#
		</isNotEmpty>
		<isNotEmpty property="appTypes">
		       and t1.coreapp_group_id in (select coreapp_group_id
		                                     from tbl_dp_coreapp_group
		                                    where app_type in (<iterate property="appTypes" conjunction=",">#appTypes[]#</iterate>))
		</isNotEmpty>
		<isNotEmpty property="status">
		       and t1.status in (<iterate property="status" conjunction=",">#status[]#</iterate>)
		</isNotEmpty>
		 order by
		       t1.ver desc, t1.coreapp_id desc
	   	<include refid="GOMP.pagingEnd"/>
	</select>
	
	<select id="Device.selectSupportDeviceList"
		resultMap="Device.selectSupportDeviceList.result"
		parameterClass="java.lang.Long">
		/* Device.selectSupportDeviceList kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         t1.phone_model_cd
		       , t1.gdcd
		       , t1.mgmt_phone_model_nm
		       , t1.model_nm
		       , t1.make_comp
		       , t1.vm_ver
		       , t1.lcd_size
		       , t1.vm_type
		       , t1.network_cd
		       , t1.list_img_pos
		       , t1.dtl_img_pos
		       , t1.svc_cd
		       , t1.del_yn
		       , t2.coreapp_id
		       , t2.ver_status
		       , (select b.ver
		            from tbl_dp_coreapp_hp a, tbl_dp_coreapp b
		           where b.coreapp_id = a.coreapp_id
		                 and b.app_type = 'DP002821'
		                 and a.phone_model_cd = t1.phone_model_cd
		                 and a.ver_status = 'DP005402') as sc_test_ver
		       , (select b.ver
		            from tbl_dp_coreapp_hp a, tbl_dp_coreapp b
		           where b.coreapp_id = a.coreapp_id
		                 and b.app_type = 'DP002821'
		                 and a.phone_model_cd = t1.phone_model_cd
		                 and a.ver_status = 'DP005403') as sc_product_ver
		       , (select b.ver
		            from tbl_dp_coreapp_hp a, tbl_dp_coreapp b
		           where b.coreapp_id = a.coreapp_id
		                 and b.app_type = 'DP002824'
		                 and a.phone_model_cd = t1.phone_model_cd
		                 and a.ver_status = 'DP005402') as arm_test_ver
		       , (select b.ver
		            from tbl_dp_coreapp_hp a, tbl_dp_coreapp b
		           where b.coreapp_id = a.coreapp_id
		                 and b.app_type = 'DP002824'
		                 and a.phone_model_cd = t1.phone_model_cd
		                 and a.ver_status = 'DP005403') as arm_product_ver
		  from
		       tbl_phone_info t1
		       , tbl_dp_coreapp_hp t2
		 where
		       t1.svc_cd in ('US005202', 'US005203')
		       and t1.del_yn = 'N'
		       and t2.coreapp_id(+) = #coreappId#
		       and t2.phone_model_cd(+) = t1.phone_model_cd
		<isNotEmpty>
		union all
		select
		         t1.phone_model_cd
		       , t1.gdcd
		       , t1.mgmt_phone_model_nm
		       , t1.model_nm
		       , t1.make_comp
		       , t1.vm_ver
		       , t1.lcd_size
		       , t1.vm_type
		       , t1.network_cd
		       , t1.list_img_pos
		       , t1.dtl_img_pos
		       , t1.svc_cd
		       , t1.del_yn
		       , t2.coreapp_id
		       , t2.ver_status
		       , (select b.ver
		            from tbl_dp_coreapp_hp a, tbl_dp_coreapp b
		           where b.coreapp_id = a.coreapp_id
		                 and b.app_type = 'DP002821'
		                 and a.phone_model_cd = t1.phone_model_cd
		                 and a.ver_status = 'DP005402') as sc_test_ver
		       , (select b.ver
		            from tbl_dp_coreapp_hp a, tbl_dp_coreapp b
		           where b.coreapp_id = a.coreapp_id
		                 and b.app_type = 'DP002821'
		                 and a.phone_model_cd = t1.phone_model_cd
		                 and a.ver_status = 'DP005403') as sc_product_ver
		       , (select b.ver
		            from tbl_dp_coreapp_hp a, tbl_dp_coreapp b
		           where b.coreapp_id = a.coreapp_id
		                 and b.app_type = 'DP002824'
		                 and a.phone_model_cd = t1.phone_model_cd
		                 and a.ver_status = 'DP005402') as arm_test_ver
		       , (select b.ver
		            from tbl_dp_coreapp_hp a, tbl_dp_coreapp b
		           where b.coreapp_id = a.coreapp_id
		                 and b.app_type = 'DP002824'
		                 and a.phone_model_cd = t1.phone_model_cd
		                 and a.ver_status = 'DP005403') as arm_product_ver
		  from
		       tbl_phone_info t1
		       , tbl_dp_coreapp_hp t2
		 where
		       t1.svc_cd in ('US005202', 'US005203')
		       and t1.del_yn = 'Y'
		       and t2.coreapp_id = #coreappId#
		       and t2.phone_model_cd = t1.phone_model_cd
		</isNotEmpty>
		 order by
		       model_nm asc
	</select>
	
	<select id="Device.selectCoreAppInfo"
		resultMap="Device.selectCoreAppInfo.result"
		parameterClass="java.lang.Long">
		/* Device.selectCoreAppInfo kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         t1.coreapp_id
		       , t1.coreapp_group_id
		       , t1.ver
		       , t1.app_path
		       , t1.prod_desc
		       , t1.status
		       , t1.reg_dttm
		       , t1.reg_id
		       , t1.upd_dttm
		       , t1.upd_id
		       , t2.app_type
		       , t2.group_name
		  from
		       tbl_dp_coreapp t1
		       , tbl_dp_coreapp_group t2
		 where
		       t2.coreapp_group_id 	= t1.coreapp_group_id
		       and t1.coreapp_id 	= #codeappId#
	</select>
	
	<insert id="Device.insertCoreApp"
		parameterClass="CoreApp">
		<selectKey type="post" resultClass="java.lang.Long">
			select seq_dp_coreapp.currval from dual
		</selectKey>
		/* Device.insertCoreApp kbeui 2011.05.11 : Device_SqlMap.xml */
		insert into
		       tbl_dp_coreapp
		       ( coreapp_id
		       , coreapp_group_id
		       , ver
		       , app_path
		       , prod_desc
		       , status
		       , reg_id
		       , upd_id)
		values       
		       ( seq_dp_coreapp.nextval
		       , #coreappGroupId#
		       , #ver#
		       , #appPath#
		       , #prodDesc#
		       , #status#
		       , #updId#
		       , #updId#)
	</insert>
		

	<update id="Device.updateCoreApp"
		parameterClass="CoreApp">
		/* Device.updateCoreApp kbeui 2011.05.11 : Device_SqlMap.xml */
		update
		       tbl_dp_coreapp
		   set
		         ver              = #ver#
		<isNotEmpty property="appPath">
		       , app_path         = #appPath#
		</isNotEmpty>
		       , coreapp_group_id = #coreappGroupId#
		       , prod_desc        = #prodDesc#
		       , upd_dttm         = to_char(sysdate, 'yyyymmddhh24miss')
		       , upd_id           = #updId#
		 where
		       coreapp_id = #coreappId#
	</update>

	<delete id="Device.cleanSupportDeviceList"
		parameterClass="java.lang.String">
		/* Device.cleanSupportDeviceList kbeui 2011.05.11 : Device_SqlMap.xml */
		delete from
		       tbl_dp_coreapp_hp
		 where
		       coreapp_id = #coreappId#
	</delete>
	
	<insert id="Device.insertSupportDevice"
		parameterClass="CoreAppSupport">
		/* Device.insertSupportDevice kbeui 2011.05.11 : Device_SqlMap.xml */
		insert into
		       tbl_dp_coreapp_hp
		       ( coreapp_id
		       , phone_model_cd
		       , ver_status)
		values
		       ( #coreappId#
		       , #phoneModelCd#
		       , #verStatus#)
	</insert>	


	<update id="Device.updateExclusiveCoreAppStatus"
		parameterClass="java.lang.String">
		/* Device.updateExclusiveCoreAppStatus kbeui 2011.05.11 : Device_SqlMap.xml */
		update
		       tbl_dp_coreapp_hp
		   set
		       ver_status = 'DP005401'
		 where
		       (coreapp_id, phone_model_cd) in (select u1.coreapp_id, u1.phone_model_cd
		                                          from tbl_dp_coreapp_hp t1, tbl_dp_coreapp t2, tbl_dp_coreapp_hp u1, tbl_dp_coreapp u2
		                                         where t1.coreapp_id = #coreappId#
		                                               and t2.coreapp_id = #coreappId#
		                                               and u1.coreapp_id != #coreappId#
		                                               and u1.phone_model_cd = t1.phone_model_cd
		                                               and u1.ver_status = t1.ver_status
		                                               and u2.coreapp_id = u1.coreapp_id
		                                               and u2.app_type = t2.app_type)
	</update>


	<select id="Device.selectCoreAppInfoByVer"
		resultMap="Device.selectCoreAppInfoByVer.result"
		parameterClass="CoreApp">
		/* Device.selectCoreAppInfoByVer kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         coreapp_id
		       , coreapp_group_id
		       , ver
		       , app_path
		       , prod_desc
		       , reg_dttm
		       , reg_id
		       , upd_dttm
		       , upd_id
		  from
		       tbl_dp_coreapp
		 where
		       coreapp_group_id = #coreappGroupId#
		       and ver = #ver#
	</select>
	
	
	<select id="Device.selectCoreappIdByVerNType"
		resultClass="java.lang.String"
		parameterClass="CoreApp">
		/* Device.selectCoreappIdByVerNType kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		       coreapp_id
		  from
		       tbl_dp_coreapp
		 where
		       <!-- app_type = #appType# -->
		       and ver = #ver#
	</select>
	
	
	<select id="Device.searchCoreappManageDevices"
		resultMap="Device.searchCoreappManageDevices.result"
		parameterClass="DeviceSearch">
		/* Device.searchCoreappManageDevices kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         phone_model_cd
		       , gdcd
		       , mgmt_phone_model_nm
		       , model_nm
		       , make_comp
		       , vm_ver
		       , lcd_size
		       , vm_type
		       , network_cd
		       , list_img_pos
		       , dtl_img_pos
		       , svc_cd
		       , del_yn
		       , reg_id
		       , reg_dttm
		       , upd_id
		       , upd_dttm
		  from
		       tbl_phone_info
		 where 
		       vm_type = #vmType#
		<isEqual property="includeDeletedDevice" compareValue="false">		       
		       and del_yn = 'N'
		</isEqual>
		<isNotEmpty property="modelNm">
		       and model_nm like '%' || #modelNm# || '%'
		</isNotEmpty>
		<isNotEmpty property="makeComp">
		       and make_comp = #makeComp#
		</isNotEmpty>
		<isNotEmpty property="vmVer">
		       and vm_ver = #vmVer#
		</isNotEmpty>
		<isNotEmpty property="svcCd">
		       and svc_cd in (<iterate property="svcCd" conjunction=",">#svcCd[]#</iterate>)
		</isNotEmpty>
		<isNotEmpty property="verStatus">
		       and exists (select 1
		                     from tbl_dp_coreapp t1, tbl_dp_coreapp_hp t2
		                    where t1.coreapp_id = t2.coreapp_id
		                          and t2.phone_model_cd = tbl_phone_info.phone_model_cd
		                          and t2.ver_status in (<iterate property="verStatus" conjunction=",">#verStatus[]#</iterate>)
		                          and rownum=1)
		</isNotEmpty>
	</select>

	<select id="Device.searchCoreappByDevice"
		resultMap="Device.searchCoreappByDevice.result"
		parameterClass="CoreAppSearch">
		/* Device.searchCoreappByDevice kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         t1.coreapp_id
		       , t1.platform
		       , t1.app_type
		       , t1.ver
		       , t1.app_path
		       , t1.prod_desc
		       , t1.prod_num
		       , t1.lcd_size
		       , t1.os_ver
		       , t1.reg_dt
		       , t1.reg_id
		       , t1.upd_dt
		       , t1.upd_id
		       , t2.phone_model_cd
		       , t2.ver_status
		  from
		         tbl_dp_coreapp t1
		       , tbl_dp_coreapp_hp t2
		 where
		       t2.coreapp_id = t1.coreapp_id
		       <!-- and t1.platform = #platform#
		       and t1.app_type = #appType#
		       and t2.phone_model_cd = #device#-->
		 order by
		       t1.ver desc
	</select>

	<update id="Device.cleanSupportDeviceStatus"
		parameterClass="CoreAppSupport">
		/* Device.cleanSupportDeviceStatus kbeui 2011.05.11 : Device_SqlMap.xml */
 		update
		       tbl_dp_coreapp_hp
		   set
		       ver_status = 'DP005401'
		 where
		       coreapp_id in (select t1.coreapp_id
		       	                from tbl_dp_coreapp t1, tbl_dp_coreapp_hp t2
		       	               where t1.coreapp_id = t2.coreapp_id 
		       	                     and t1.app_type = (select app_type from tbl_dp_coreapp where coreapp_id = #coreappId#)
		       	                     and t2.phone_model_cd = #phoneModelCd#
		       	                     and t2.ver_status = #verStatus#)
	</update>
	
	<update id="Device.updateSupportDeviceStatus"
		parameterClass="CoreAppSupport">
		/* Device.updateSupportDeviceStatus kbeui 2011.05.11 : Device_SqlMap.xml */
		update
		       tbl_dp_coreapp_hp
		   set
		       ver_status = #verStatus#
		 where
		       coreapp_id = #coreappId#
		       and phone_model_cd = #phoneModelCd#
	</update>
	
	
	<select id="Device.getAppLastVersion"
		parameterClass="java.lang.Long"
		resultClass="java.lang.String">
		/* Device.getAppLastVersion kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		       max(ver)
		  from
		       tbl_dp_coreapp
		 where
		       coreapp_group_id = #coreappGroupId#
	</select>
	
	
	<select id="Device.searchCoreAppGroupList"
		resultMap="Device.searchCoreAppGroupList.result"
		parameterClass="CoreAppGroupSearch">
		/* Device.searchCoreAppGroupList kbeui 2011.05.11 : Device_SqlMap.xml */
	   	<include refid="GOMP.pagingStart"/>
		select
		   	<include refid="GOMP.pagingTotalCount"/>
		         coreapp_group_id
		       , app_type
		       , group_name
		       , group_desc
		       , reg_dttm
		       , reg_id
		       , upd_dttm
		       , upd_id
		       , (select count(*) from tbl_dp_coreapp_group_hp where coreapp_group_id = t1.coreapp_group_id) as device_count
		       , (select count(*) from tbl_dp_coreapp where coreapp_group_id = t1.coreapp_group_id) as coreapp_count
		  from
		       tbl_dp_coreapp_group t1
		 where
		       reg_dttm between #fromDate# || '000000' and #toDate# || '235959'
		<isNotEmpty property="appTypes">
		       and app_type in (<iterate property="appTypes" conjunction=",">#appTypes[]#</iterate>)
		</isNotEmpty>
		<isNotEmpty property="keyword">
			<isEqual property="searchType" compareValue="groupName">		                           
		       and upper(group_name) like '%' || upper(#keyword#) || '%'
			</isEqual>
			<isNotEqual property="searchType" compareValue="groupName">
		       and exists ( select 1
		                      from tbl_dp_coreapp_group_hp st1, tbl_phone_info st2
		                     where
		                           st1.coreapp_group_id = t1.coreapp_group_id
		                           and st2.phone_model_cd = st1.phone_model_cd
				<isEqual property="searchType" compareValue="modelName">		                           
		                           and upper(st2.mgmt_phone_model_nm) like '%' || upper(#keyword#) || '%'
				</isEqual>
				<isEqual property="searchType" compareValue="deviceName">		                           
		                           and upper(st2.model_nm like) '%' || upper(#keyword#) || '%'
				</isEqual>
		                           and rownum = 1)
			</isNotEqual>
		</isNotEmpty>
		 order by
		       coreapp_group_id desc		                           
	   	<include refid="GOMP.pagingEnd"/>
	</select>
	
	<select id="Device.getCoreAppGroupDeviceList"
		resultMap="Device.getCoreAppGroupDeviceList.result"
		parameterClass="CoreAppGroupDeviceSearch">
		/* Device.getCoreAppGroupDeviceList kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         t1.phone_model_cd
		       , t1.gdcd
		       , t1.mgmt_phone_model_nm
		       , t1.model_nm
		       , t1.make_comp
		       , t1.vm_ver
		       , t1.lcd_size
		       , t1.vm_type
		       , t1.network_cd
		       , t1.list_img_pos
		       , t1.dtl_img_pos
		       , t1.svc_cd
		       , t1.del_yn
		<isEmpty property="coreappGroupId">
		       , 0 as joined
		</isEmpty>
		<isNotEmpty property="coreappGroupId">
		       , decode(t2.coreapp_group_id, #coreappGroupId#, 1, 0) as joined
		</isNotEmpty>
		       , t2.coreapp_group_id
		       , t2.group_name
		  from
		       tbl_phone_info t1
		       , (select st2.phone_model_cd, st1.coreapp_group_id, st1.group_name
		            from tbl_dp_coreapp_group st1, tbl_dp_coreapp_group_hp st2
		           where st2.coreapp_group_id = st1.coreapp_group_id and st1.app_type = #appType#) t2
		 where
		       t1.svc_cd = 'US005203'
		       and t1.del_yn = 'N'
		       and t2.phone_model_cd(+)     = t1.phone_model_cd
		 order by
		       t1.mgmt_phone_model_nm asc, t1.model_nm asc, t1.vm_ver asc		                           
	</select>
	
	<insert id="Device.insertCoreAppGroup"
		parameterClass="CoreAppGroupEdit">
		<selectKey type="post" resultClass="java.lang.Long">
			select seq_dp_coreapp_group.currval from dual
		</selectKey>
		/* Device.insertCoreAppGroup kbeui 2011.05.11 : Device_SqlMap.xml */
		insert into
		       tbl_dp_coreapp_group
		       ( coreapp_group_id
		       , app_type
		       , group_name
		       , group_desc
		       , reg_id
		       , upd_id)
		values
		       ( seq_dp_coreapp_group.nextval
		       , #appType#
		       , #groupName#
		       , #groupDesc#
		       , #updId#
		       , #updId#)	
	</insert>
	
	<update id="Device.updateCoreAppGroup">
		/* Device.updateCoreAppGroup kbeui 2011.05.11 : Device_SqlMap.xml */
		update
		       tbl_dp_coreapp_group
		   set
		         group_name = #groupName#
		       , group_desc = #groupDesc#
		       , upd_dttm = to_char(sysdate, 'yyyymmddhh24miss')
		       , upd_id = #updId#
		 where
		         coreapp_group_id = #coreappGroupId#
	</update>
	
	<delete id="Device.clearGroupDeviceList"
		parameterClass="java.lang.Long">
		/* Device.clearGroupDeviceList kbeui 2011.05.11 : Device_SqlMap.xml */
		delete from
		       tbl_dp_coreapp_group_hp
		 where
		       coreapp_group_id = #coreappGroupId#
	</delete>
	<delete id="Device.withdrawOtherGroupDeviceList"
		parameterClass="coreAppGroupEdit">
		/* Device.withdrawOtherGroupDeviceList kbeui 2011.05.11 : Device_SqlMap.xml */
		delete from
		       tbl_dp_coreapp_group_hp
		 where
		       coreapp_group_id in (select coreapp_group_id from tbl_dp_coreapp_group where app_type=#appType#)
		       and phone_model_cd in (<iterate property="phoneModelCd" conjunction=",">#phoneModelCd[]#</iterate>)
	</delete>
	
	<insert id="Device.insertCoreAppGroupDevice"
		parameterClass="CoreAppGroupDevice">
		/* Device.insertCoreAppGroupDevice kbeui 2011.05.11 : Device_SqlMap.xml */
		insert into
		       tbl_dp_coreapp_group_hp
		       ( coreapp_group_id
		       , phone_model_cd)
		values
		       ( #coreappGroupId#
		       , #phoneModelCd#)
	</insert>
	
	
	<select id="Device.selectCoreAppGroupEdit"
		resultMap="Device.selectCoreAppGroupEdit.result"
		parameterClass="java.lang.Long">
		/* Device.selectCoreAppGroupEdit kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         coreapp_group_id
		       , app_type
		       , group_name
		       , group_desc
		       , reg_dttm
		       , reg_id
		       , upd_dttm
		       , upd_id
		  from
		       tbl_dp_coreapp_group
		 where
		       coreapp_group_id = #coreappGroupId#
	</select>
	
	<select id="Device.checkDuplicateGroupName"
		parameterClass="CoreAppGroupEdit"
		resultClass="java.lang.String">
		/* Device.checkDuplicateGroupName kbeui 2011.05.11 : Device_SqlMap.xml */
		select 1
		  from tbl_dp_coreapp_group
		 where app_type = #appType#
		<isNotEmpty property="coreappGroupId">
				and coreapp_group_id != #coreappGroupId#
		</isNotEmpty>
		       and group_name = #groupName#
		       and rownum = 1
	</select>	
	
	<delete id="Device.deleteCoreAppGroup"
		parameterClass="java.lang.Long">
		/* Device.deleteCoreAppGroup kbeui 2011.05.11 : Device_SqlMap.xml */
		delete from
		       tbl_dp_coreapp_group
		 where
		       coreapp_group_id = #groupId#
		       and not exists (select 1 from tbl_dp_coreapp where coreapp_group_id = #groupId# and rownum=1)
	</delete>
	
	<delete id="Device.deleteCoreAppGroupHp"
		parameterClass="java.lang.Long">
		/* Device.deleteCoreAppGroupHp kbeui 2011.05.11 : Device_SqlMap.xml */
		delete from
		       tbl_dp_coreapp_group_hp
		 where
		       coreapp_group_id = #groupId#
	</delete>
	

	<select id="Device.searchCoreAppGroupList4Vermng"
		resultMap="Device.searchCoreAppGroupList4Vermng.result"
		parameterClass="CoreAppSearch">
		/* Device.searchCoreAppGroupList4Vermng kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         coreapp_group_id
		       , app_type
		       , group_name
		       , group_desc
		       , reg_dttm
		       , reg_id
		       , upd_dttm
		       , upd_id
		       , (select count(*) from tbl_dp_coreapp_group_hp where coreapp_group_id = t1.coreapp_group_id) as device_count
		  from
		       tbl_dp_coreapp_group t1
		<isNotEmpty property="appTypes">
		 where
		       app_type in (<iterate property="appTypes" conjunction=",">#appTypes[]#</iterate>)
		</isNotEmpty>
		 order by
		       group_name asc		                           
	</select>
	
	
	
	<update id="Device.clearCoreappStatus"
		parameterClass="CoreApp">
		/* Device.clearCoreappStatus kbeui 2011.05.11 : Device_SqlMap.xml */
		update 
		       tbl_dp_coreapp
		   set
		       status = 'DP005401'
		       , upd_id = #updId#
		       , upd_dttm = to_char(sysdate , 'yyyymmddhh24miss')
		 where
		       coreapp_id in (select coreapp_id
		                        from tbl_dp_coreapp
		                       where coreapp_group_id = (select coreapp_group_id
		                                                   from tbl_dp_coreapp
		                                                  where coreapp_id = #coreappId#))
		       and status = #status#
	</update>
	
	<update id="Device.updateCoreappStatus"
		parameterClass="CoreApp">
		/* Device.updateCoreappStatus kbeui 2011.05.11 : Device_SqlMap.xml */
		update
		       tbl_dp_coreapp
		   set
		       status = #status#
		       , upd_id = #updId#
		       , upd_dttm = to_char(sysdate , 'yyyymmddhh24miss')
		 where
		       coreapp_id = #coreappId#
	</update>
	
	<select id="Device.searchCoreappHistory"
		resultMap="Device.searchCoreappHistory.result"
		parameterClass="CoreAppHistorySearch">
		/* Device.searchCoreappHistory kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         t2.coreapp_id
		       , t2.coreapp_group_id
		       , t2.ver
		       , t2.app_path
		       , t2.prod_desc
		       , t2.status
		       , t2.reg_dttm
		       , t2.reg_id
		       , t2.upd_dttm
		       , t2.upd_id
		  from
		       tbl_dp_coreapp_group_hp t1,
		       tbl_dp_coreapp t2,
		       tbl_dp_coreapp_group t3
		 where
		       t2.coreapp_group_id = t1.coreapp_group_id
		       and t3.coreapp_group_id = t1.coreapp_group_id
		       and t1.phone_model_cd = #phoneModelCd#
		       and t3.app_type = #appType#
		       and rownum &lt;= 10
		 order by
		       t2.ver desc
	</select>
	
	
	<select id="Device.getGroupDeviceList"
		resultMap="Device.getGroupDeviceList.result"
		parameterClass="java.lang.Long">
		/* Device.getGroupDeviceList kbeui 2011.05.11 : Device_SqlMap.xml */
		select
		         t2.phone_model_cd
		       , t2.gdcd
		       , t2.mgmt_phone_model_nm
		       , t2.model_nm
		       , t2.make_comp
		       , t2.vm_ver
		       , t2.lcd_size
		       , t2.vm_type
		       , t2.network_cd
		       , t2.list_img_pos
		       , t2.dtl_img_pos
		       , t2.svc_cd
		       , t2.del_yn
		  from
		       tbl_dp_coreapp_group_hp t1
		       , tbl_phone_info t2
		 where
		       t2.phone_model_cd = t1.phone_model_cd
		       and t2.svc_cd = 'US005203'
		       and t2.del_yn = 'N'
		       and t1.coreapp_group_id = #corappGroupId#
		 order by
		       t2.mgmt_phone_model_nm asc, t2.vm_ver asc		                           
	</select>
	
</sqlMap>